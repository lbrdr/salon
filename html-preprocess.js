const path = require('path')
const fs = require('fs')

const htmlPath = path.resolve(__dirname, 'renderer', 'html')
const outputPath = path.resolve(__dirname, 'renderer', 'html-files(auto-generated).js')

const dirents = fs.readdirSync(htmlPath, {withFileTypes: true})
fs.writeFileSync(outputPath, '// Variables of HTML file contents. Generated by html-preprocess.js')

fs.appendFileSync(outputPath, '\nhtmlFiles = ')

const htmlFiles = {}

for (const dirent of dirents) {
	if (dirent.isFile()) {
		
		const fileName = dirent.name
		const filePath = path.resolve(htmlPath, fileName)
		const fileContent = fs.readFileSync(filePath, {encoding: 'utf8'})
		
		htmlFiles[fileName] = fileContent
		
	}
}

fs.appendFileSync(
	outputPath,
	JSON.stringify(htmlFiles, null, 4)
);